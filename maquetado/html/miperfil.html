<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Perfil - ManosSeguras</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/miperfil.css">
</head>
<body>
    <header class="site-header">
        <nav class="nav-main">
            <div class="logo">
                <a href="index.html">
                    <img src="../img/main-logo.png" alt="ManosSeguras">
                </a>
            </div>
            <div class="nav-links-wrapper">
                <ul class="nav-links">
                    <li><a href="index.html">Inicio</a></li>
                    <li><a href="profesionales.html">Profesionales</a></li>
                                        <li><a href="miperfil.html">Mi Perfil</a></li>
                    <li><a href="admin.html">Admin</a></li>
                </ul>
                <div class="nav-actions">
                    <a href="login.html" class="btn btn-outline">Ingresar</a>
                    <a href="registro.html" class="btn btn-primary">Crear cuenta</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="panel-pro">
        <section class="panel-hero">
            <div>
                <p class="eyebrow">Mi Perfil</p>
                <h1>Juan García</h1>
                <p class="lead">Electricista matriculado con más de 10 años de experiencia en proyectos residenciales y comerciales.</p>
                <div class="hero-tags">
                    <span class="status-pill success">Perfil verificado</span>
                    <span class="status-pill">8 años activo en ManosSeguras</span>
                </div>
            </div>
            <div class="hero-stats">
                <div class="stat-block">
                    <p class="stat-label">Trabajos finalizados</p>
                    <p class="stat-value">127</p>
                </div>
                <div class="stat-block">
                    <p class="stat-label">Solicitudes abiertas</p>
                    <p class="stat-value">3</p>
                </div>
                <div class="stat-block">
                    <p class="stat-label">Calificación promedio</p>
                    <p class="stat-value">4.9</p>
                </div>
            </div>
        </section>

        <section class="panel-tabs">
            <button class="tab-link active" type="button" data-tab="solicitudes">Solicitudes</button>
            <button class="tab-link" type="button" data-tab="calendario">Calendario</button>
            <button class="tab-link" type="button" data-tab="datos-personales">Datos personales</button>
            <button class="tab-link" type="button" data-tab="seguridad">Seguridad</button>
            <button class="tab-link" type="button" data-tab="servicios">Servicios</button>
            <button class="tab-link" type="button" data-tab="certificaciones">Certificaciones</button>
            <button class="tab-link" type="button" data-tab="zona">Zona de trabajo</button>
        </section>

        <section class="panel-grid">
            <article class="panel-card wide tab-panel active" id="solicitudes">
                <div class="card-header">
                    <span class="marker"></span>
                    <div>
                        <h2>Solicitudes y chat</h2>
                        <p>Todos los pedidos quedan registrados y sirven como garantía.</p>
                    </div>
                </div>
                <div class="solicitudes-lista">
                    <div class="solicitud-card">
                        <div class="solicitud-head">
                            <div>
                                <h4>Instalación de tablero trifásico</h4>
                                <p>Ana Martínez • Fecha sugerida 24/05</p>
                            </div>
                            <span class="status-pill">En revisión</span>
                        </div>
                        <div class="solicitud-chat">
                            <div class="chat-row">
                                <span class="chat-author">Cliente</span>
                                <p>Necesito reemplazar el tablero actual. ¿Tenés disponibilidad esa semana?</p>
                            </div>
                            <div class="chat-row professional">
                                <span class="chat-author">Juan (vos)</span>
                                <p>Puedo visitarte el miércoles 22 para revisar con detalle y confirmar presupuesto.</p>
                            </div>
                        </div>
                        <div class="solicitud-actions">
                            <button class="btn btn-outline">Aceptar trabajo</button>
                            <button class="btn btn-outline">Rechazar</button>
                            <button class="btn-link">Abrir solicitud completa</button>
                        </div>
                    </div>

                    <div class="solicitud-card">
                        <div class="solicitud-head">
                            <div>
                                <h4>Emergencia: corte parcial</h4>
                                <p>Carlos López • Solicitud creada 12/05</p>
                            </div>
                            <span class="status-pill success">Tomado</span>
                        </div>
                        <div class="solicitud-chat">
                            <div class="chat-row">
                                <span class="chat-author">Cliente</span>
                                <p>Se apagó la mitad de la casa. Tengo tablero Schneider con térmicas de 25A.</p>
                            </div>
                            <div class="chat-row professional">
                                <span class="chat-author">Juan (vos)</span>
                                <p>Llego hoy a las 18 h. Dejé asentado el detalle en el chat como respaldo.</p>
                            </div>
                        </div>
                        <div class="solicitud-actions">
                            <button class="btn-link">Ver conversación</button>
                        </div>
                    </div>
                </div>
            </article>

            <article class="panel-card wide tab-panel" id="calendario">
                <div class="card-header">
                    <span class="marker"></span>
                    <div>
                        <h2>Calendario manual</h2>
                        <p>Mantené tres meses a la vista y actualizá tu disponibilidad manualmente.</p>
                    </div>
                </div>
                <div class="pro-calendar" data-multi-calendar>
                    <div class="calendar-controls">
                        <button class="cal-btn" data-cal-prev aria-label="Mes anterior">&larr;</button>
                        <h3 class="calendar-range" data-cal-range>Septiembre - Noviembre 2025</h3>
                        <button class="cal-btn" data-cal-next aria-label="Mes siguiente">&rarr;</button>
                    </div>
                    <div class="calendar-columns" data-calendar-columns>
                        <!-- columnas generadas por script -->
                    </div>
                    <div class="calendar-legend">
                        <span><span class="legend-dot free"></span> Disponible</span>
                        <span><span class="legend-dot busy"></span> Reservado</span>
                        <span><span class="legend-dot past"></span> Pasado</span>
                    </div>
                </div>
            </article>

            <article class="panel-card wide tab-panel" id="datos-personales">
                <div class="card-header">
                    <span class="marker"></span>
                    <div>
                        <h2>Datos personales</h2>
                        <p>Actualizá tu información básica. Se mostrará en tu perfil público.</p>
                    </div>
                </div>
                <form class="panel-form">
                    <div class="avatar-block">
                        <img src="../img/usuarios/nicolas.jpg" alt="Avatar" class="avatar">
                        <div>
                            <button type="button" class="btn-outline small">Cambiar foto</button>
                            <p class="help-text">PNG o JPG - máx 2 MB</p>
                        </div>
                    </div>
                    <div class="form-row">
                        <label>Nombre
                            <input type="text" value="Juan" />
                        </label>
                        <label>Apellido
                            <input type="text" value="García" />
                        </label>
                    </div>
                    <div class="form-row">
                        <label>Email
                            <input type="email" value="juan.garcia@email.com" />
                        </label>
                        <label>Teléfono
                            <input type="tel" value="+54 11 1234 5678" />
                        </label>
                    </div>
                    <label>Descripción profesional
                        <textarea rows="4">Electricista con experiencia en obras nuevas, mantenimiento y emergencias 24/7.</textarea>
                    </label>
                    <div class="form-row">
                        <label>Años de experiencia
                            <input type="number" value="10" />
                        </label>
                        <label>Especialidad principal
                            <select>
                                <option>Electricista</option>
                                <option>Plomero</option>
                                <option>Gasista</option>
                            </select>
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline">Descartar</button>
                        <button type="submit" class="btn btn-primary">Guardar cambios</button>
                    </div>
                </form>
            </article>

            <article class="panel-card tab-panel" id="seguridad">
                <div class="card-header">
                    <span class="marker"></span>
                    <div>
                        <h3>Seguridad y accesos</h3>
                        <p>Mantené tus datos protegidos.</p>
                    </div>
                </div>
                <form class="panel-form compact">
                    <label>Email de acceso
                        <input type="email" value="juan.garcia@email.com">
                    </label>
                    <label>Contraseña actual
                        <input type="password" value="********">
                    </label>
                    <div class="form-row">
                        <label>Nueva contraseña
                            <input type="password" placeholder="••••••">
                        </label>
                        <label>Confirmar
                            <input type="password" placeholder="••••••">
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-primary">Actualizar seguridad</button>
                    </div>
                </form>
            </article>

            <article class="panel-card tab-panel" id="servicios">
                <div class="card-header">
                    <span class="marker"></span>
                    <div>
                        <h3>Servicios y tarifas</h3>
                        <p>Define qué trabajos ofrecés.</p>
                    </div>
                </div>
                <div class="servicios-lista">
                    <div class="servicio-row">
                        <div>
                            <h4>Instalación eléctrica completa</h4>
                            <p>$15.000 - $50.000</p>
                        </div>
                        <div class="row-actions">
                            <button class="btn-link">Editar</button>
                            <button class="btn-link danger">Eliminar</button>
                        </div>
                    </div>
                    <div class="servicio-row">
                        <div>
                            <h4>Reparaciones urgentes</h4>
                            <p>$3.000 - $10.000</p>
                        </div>
                        <div class="row-actions">
                            <button class="btn-link">Editar</button>
                            <button class="btn-link danger">Eliminar</button>
                        </div>
                    </div>
                    <div class="servicio-row">
                        <div>
                            <h4>Mantenimiento preventivo</h4>
                            <p>$2.000 - $8.000</p>
                        </div>
                        <div class="row-actions">
                            <button class="btn-link">Editar</button>
                            <button class="btn-link danger">Eliminar</button>
                        </div>
                    </div>
                </div>
                <button class="btn btn-outline full">Agregar nuevo servicio</button>
            </article>

            <article class="panel-card tab-panel" id="certificaciones">
                <div class="card-header">
                    <span class="marker"></span>
                    <div>
                        <h3>Certificaciones</h3>
                        <p>Documentos verificados por el administrador.</p>
                    </div>
                </div>
                <ul class="checklist">
                    <li>
                        <div>
                            <strong>Matrícula profesional</strong>
                            <p>Renovación 2025 cargada</p>
                        </div>
                        <span class="status-pill success">Aprobado</span>
                    </li>
                    <li>
                        <div>
                            <strong>Curso de seguridad eléctrica</strong>
                            <p>Certificado adjunto</p>
                        </div>
                        <span class="status-pill">En revisión</span>
                    </li>
                    <li>
                        <div>
                            <strong>Póliza de seguro</strong>
                            <p>Vigente hasta 12/2025</p>
                        </div>
                        <span class="status-pill success">Validado</span>
                    </li>
                </ul>
            </article>

            <article class="panel-card tab-panel" id="zona">
                <div class="card-header">
                    <span class="marker"></span>
                    <div>
                        <h3>Zona de trabajo</h3>
                        <p>Los clientes verán este radio de cobertura.</p>
                    </div>
                </div>
                <div class="zona-info">
                    <p><strong>Base:</strong> Caballito, CABA</p>
                    <p><strong>Radio:</strong> Hasta 25 km - GBA Oeste y Norte</p>
                    <p><strong>Disponibilidad:</strong> Lunes a sábado de 8 a 20 h</p>
                </div>
                <button class="btn btn-outline">Editar cobertura</button>
            </article>
        </section>
    </main>

    <footer>
        <div class="footer-bottom">
            <p>&copy; 2025 ManosSeguras</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const tabButtons = document.querySelectorAll('.tab-link');
            const tabPanels = document.querySelectorAll('.tab-panel');

            const showPanel = (panelId) => {
                tabButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.tab === panelId));
                tabPanels.forEach(panel => panel.classList.toggle('active', panel.id === panelId));
            };

            tabButtons.forEach(btn => {
                btn.addEventListener('click', () => showPanel(btn.dataset.tab));
            });

            const initial = document.querySelector('.tab-link.active');
            if (initial) {
                showPanel(initial.dataset.tab);
            }

            const calendar = document.querySelector('[data-multi-calendar]');
            if (calendar) {
                const columnsEl = calendar.querySelector('[data-calendar-columns]');
                const rangeEl = calendar.querySelector('[data-cal-range]');
                const prevBtn = calendar.querySelector('[data-cal-prev]');
                const nextBtn = calendar.querySelector('[data-cal-next]');
                const monthNames = ['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre','diciembre'];
                const today = new Date(2025, 10, 15);
                today.setHours(0,0,0,0);
                let centerMonth = new Date(today.getFullYear(), today.getMonth(), 1);

                const availability = {
                    '2025-11-19': 'free',
                    '2025-11-20': 'busy',
                    '2025-11-25': 'free',
                    '2025-12-02': 'busy',
                    '2025-12-06': 'free',
                    '2025-10-28': 'busy'
                };

                const formatMonth = (date) => `${monthNames[date.getMonth()]} ${date.getFullYear()}`;

                const cycleStatus = (current) => {
                    if (current === 'free') return 'busy';
                    if (current === 'busy') return '';
                    return 'free';
                };

                const render = () => {
                    columnsEl.innerHTML = '';
                    const startRange = new Date(centerMonth.getFullYear(), centerMonth.getMonth() - 1, 1);
                    const endRange = new Date(centerMonth.getFullYear(), centerMonth.getMonth() + 1, 1);
                    rangeEl.textContent = `${formatMonth(startRange)} - ${formatMonth(endRange)}`;

                    for (let offset = -1; offset <= 1; offset++) {
                        const date = new Date(centerMonth.getFullYear(), centerMonth.getMonth() + offset, 1);
                        const wrapper = document.createElement('div');
                        wrapper.className = 'calendar-wrapper';
                        const title = document.createElement('h4');
                        title.textContent = formatMonth(date);
                        wrapper.appendChild(title);

                        const weekdays = document.createElement('div');
                        weekdays.className = 'calendar-weekdays';
                        ['L','M','M','J','V','S','D'].forEach(d => {
                            const span = document.createElement('span');
                            span.textContent = d;
                            weekdays.appendChild(span);
                        });
                        wrapper.appendChild(weekdays);

                        const grid = document.createElement('div');
                        grid.className = 'calendar-grid';
                        const firstDay = new Date(date.getFullYear(), date.getMonth(), 1);
                        const lastDay = new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();
                        const offsetStart = (firstDay.getDay() + 6) % 7;

                        for (let i = 0; i < offsetStart; i++) {
                            const filler = document.createElement('span');
                            filler.className = 'calendar-day empty';
                            grid.appendChild(filler);
                        }

                        for (let day = 1; day <= lastDay; day++) {
                            const cell = document.createElement('span');
                            cell.className = 'calendar-day';
                            cell.textContent = day;
                            const iso = `${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,'0')}-${String(day).padStart(2,'0')}`;
                            const cellDate = new Date(date.getFullYear(), date.getMonth(), day);
                            const status = availability[iso];
                            if (status) {
                                cell.dataset.status = status;
                            }
                            if (cellDate < today) {
                                cell.classList.add('past');
                            } else {
                                cell.addEventListener('click', () => {
                                    const nextStatus = cycleStatus(cell.dataset.status || '');
                                    if (nextStatus) {
                                        cell.dataset.status = nextStatus;
                                        availability[iso] = nextStatus;
                                    } else {
                                        cell.removeAttribute('data-status');
                                        delete availability[iso];
                                    }
                                });
                            }
                            grid.appendChild(cell);
                        }

                        wrapper.appendChild(grid);
                        columnsEl.appendChild(wrapper);
                    }
                };

                prevBtn.addEventListener('click', () => {
                    centerMonth.setMonth(centerMonth.getMonth() - 1);
                    render();
                });

                nextBtn.addEventListener('click', () => {
                    centerMonth.setMonth(centerMonth.getMonth() + 1);
                    render();
                });

                render();
            }
        });
    </script>
</body>
</html>
